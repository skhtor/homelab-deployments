apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

helmCharts:
- name: cert-manager
  releaseName: cert-manager
  namespace: security
  version: 1.19.1
  repo: https://charts.jetstack.io
  valuesInline:
    global:
      leaderElection:
        namespace: security
    installCRDs: true

resources:
  - ./resources/cluster-issuer.yaml
  - ./resources/root-ca.yaml
  - ./resources/iamra-cert.yaml

patchesJson6902:
  - target:
      group: apps
      version: v1
      kind: Deployment
      name: cert-manager
      namespace: security
    path: patches/aws-signing-helper-sidecar.yaml
